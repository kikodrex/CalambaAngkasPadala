<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Offline Map Test</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<link rel="stylesheet" href="./libs/leaflet.css" />
<style>
  /* All CSS is included here */
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body, #app { height: 100%; font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #facc15, #dc2626); color: #1e293b; }
  body { display: flex; flex-direction: column; min-height: 100vh; }
  header { background: linear-gradient(135deg, #dc2626, #fbbf24); color: white; padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; font-weight: 700; font-size: 1.5rem; position: sticky; top: 0; z-index: 10000; box-shadow: 0 4px 12px rgb(220 38 38 / 0.4); }
  #app { flex-grow: 1; display: flex; flex-direction: column; margin-bottom: 24px; }
  main { flex-grow: 1; display: flex; flex-direction: column; gap: 16px; padding: 16px; }
  @media(min-width: 768px) { main { flex-direction: row; padding: 24px 48px; } }
  #map { flex-grow: 1; border-radius: 16px; overflow: hidden; box-shadow: 0 8px 24px rgba(0,0,0,0.15); min-height: 320px; touch-action: none; }
  #booking-panel { background: rgba(255 255 255 / 0.95); border-radius: 16px; padding: 24px; max-width: 400px; box-shadow: 0 8px 24px rgba(0,0,0,0.1); display: flex; flex-direction: column; gap: 20px; }
  #booking-panel h2 { font-weight: 700; font-size: 1.5rem; color: #dc2626; margin-bottom: 8px; }
  #booking-form { display: flex; flex-direction: column; gap: 20px; }
  label { font-weight: 600; margin-bottom: -12px; color: #334155; }
  input { padding: 12px 16px; border-radius: 12px; border: 1px solid #cbd5e1; font-size: 1rem; transition: border-color 0.3s ease; width: 100%; }
  #status { font-size: 1rem; color: #334155; font-weight: 600; min-height: 24px; min-width: 100%; word-break: break-word; white-space: pre-wrap; }
  .leaflet-container { background: #f0f0f0; } 
  footer { text-align: center; padding: 12px 24px; font-size: 0.9rem; color: #b91c1c; }
</style>
</head>
<body>
<header>
  <div class="logo"><i class="material-icons" aria-hidden="true">motorcycle</i> Offline Test</div>
</header>
<div id="app">
  <main>
    <section id="map" aria-label="Map showing available drivers and routes" tabindex="0"></section>
    <section id="booking-panel" aria-label="Booking panel">
      <h2>Book a Ride</h2>
      <form id="booking-form" novalidate>
        <label for="pickup">Pick-up Location</label>
        <input type="text" id="pickup" placeholder="Enter pick-up address" />
        <label for="destination">Destination</label>
        <input type="text" id="destination" placeholder="Enter destination address" />
        <button type="submit">Book Now (Simulated)</button>
      </form>
      <div id="status">Please select a pickup and destination.</div>
    </section>
  </main>
</div>

<script src="./libs/leaflet.js"></script>

<script>
  (function(){
    "use strict";
    
    // --- MAP INITIALIZATION ---
    const map = L.map("map", { center: [14.2185, 121.1685], zoom: 13, zoomControl: true });

    // Using CARTO map tiles (This part still needs internet, but the map framework will load)
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
      maxZoom: 20
    }).addTo(map);

    const statusEl = document.getElementById("status");
    const driverIcon = L.icon({ iconUrl: "https://cdn-icons-png.flaticon.com/512/2972/2972185.png", iconSize: [36, 36], iconAnchor: [18, 36] });
    
    // Simple simulation logic
    L.marker([14.2185, 121.1685], {icon: driverIcon}).addTo(map);
    statusEl.textContent = "Map framework loaded successfully from local files.";

  })();
</script>

</body>
</html>
